<!DOCTYPE html>
<html>
  <head>
    <title>Client Portal<%= " â€“ #{@event.name}" if defined?(@event) && @event.present? %></title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <% [
      ["/fonts/ufonts.com_baskervilleno2bt-roman-opentype-webfont.woff", "font/woff"],
      ["/fonts/Didot.woff2", "font/woff2"],
      ["/fonts/SackersGothicStd-Medium.woff", "font/woff"],
      ["/fonts/mrseavessmallcaps_regular-webfont.woff2", "font/woff2"],
      ["/fonts/DidotLTStd-Italic.woff", "font/woff"]
    ].each do |path, mime|
    %>
      <link rel="preload" href="<%= path %>" as="font" type="<%= mime %>" crossorigin>
    <% end %>

    <% client_stylesheets = %w[
      base/fonts
      base/tokens
      base/reset
      base/elements
      utilities/helpers
      utilities/responsive
      layout/client-shell
      components/flash
      components/cards
      components/buttons
      components/forms
      components/tables
      components/pills
      components/tags
      components/modal
      components/event-links
      components/timeline
      components/calendar-grid
      components/documents-table
      pages/client-portal
      pages/client-designs
      pages/client-financials
      pages/client-questionnaires
    ] %>
    <% client_stylesheets.each do |logical_path| %>
      <%= stylesheet_link_tag logical_path, "data-turbo-track": "reload" %>
    <% end %>
    <%= javascript_importmap_tags %>
  </head>
  <body class="client-shell">
    <% portal_home = defined?(@event) && @event.present? ? client_event_path(@event) : root_path %>
    <nav class="client-nav">
      <div class="client-nav__inner client-container">
        <%= link_to portal_home, class: "client-nav__icon", aria: { label: "Portal home" } do %>
          <%= image_tag "pineapple-icon.png", alt: "" %>
        <% end %>
        <%= link_to portal_home, class: "client-nav__logo", aria: { label: "Pineapple Productions" } do %>
          <%= image_tag "portal-bar-logo.svg", alt: "Pineapple Productions" %>
        <% end %>
        <% if defined?(@event) && @event.present? %>
          <div class="client-nav__identity">
            <span class="client-nav__event"><%= @event.name %></span>
            <% if client_logged_in? %>
              <%= link_to "Sign out", client_logout_path, data: { turbo_method: :delete, turbo_confirm: "Sign out of the portal?" }, class: "client-nav__logout" %>
            <% end %>
          </div>
        <% else %>
          <span class="client-nav__spacer" aria-hidden="true"></span>
        <% end %>
      </div>
    </nav>

    <main class="client-shell__main">
      <%= render "shared/flash" %>
      <%= yield %>
    </main>

    <%= yield :scripts %>
  </body>
</html>
