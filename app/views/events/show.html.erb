<h1><%= @event.name %></h1>

<p>
  Dates:
  <% if @event.starts_on.present? %>
    <%= @event.starts_on %> - <%= @event.ends_on || @event.starts_on %>
  <% else %>
    Not set
  <% end %>
</p>

<p>Location: <%= @event.location.presence || "â€”" %></p>

<p>
  <%= link_to "Edit Event", edit_event_path(@event) %> |
  <%= link_to "All Events", events_path %> |
  <%= button_to "Delete Event", event_path(@event), method: :delete, data: { confirm: "Are you sure?" } %>
</p>

<section>
  <h2>Questionnaires</h2>
  <p><%= link_to "New Questionnaire", new_event_questionnaire_path(@event) %></p>

  <% if @questionnaires.any? %>
    <ul>
      <% @questionnaires.each do |questionnaire| %>
        <li>
          <%= link_to questionnaire.title, event_questionnaire_path(@event, questionnaire) %>
          <% if questionnaire.template? %>
            <strong>(Template)</strong>
          <% end %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p>No questionnaires yet.</p>
  <% end %>
</section>

<section>
  <h2>Available Templates</h2>
  <% if @templates.any? %>
    <ul>
      <% @templates.each do |template| %>
        <li><%= link_to template.title, event_questionnaire_path(template.event, template) %></li>
      <% end %>
    </ul>
  <% else %>
    <p>No templates marked yet.</p>
  <% end %>
  <p><%= link_to "View all templates", questionnaire_templates_path %></p>
</section>

<section>
  <h2>Documents</h2>
  <p><%= link_to "Manage documents", event_documents_path(@event) %></p>

  <% if @event.documents.any? %>
    <ul>
      <% @event.documents.latest.each do |document| %>
        <li>
          <%= link_to document.title, event_document_path(@event, document) %>
          (v<%= document.version %>)
        </li>
      <% end %>
    </ul>
  <% else %>
    <p>No documents uploaded yet.</p>
  <% end %>
</section>
