<% provide :page_shell do %>
  <div class="event-layout event-layout--index">
    <%= render "events/sidebar_index" %>

    <div class="event-layout__main">
      <%= render "shared/flash" %>

      <section class="event-section">
        <header class="event-section__header">
          <div>
            <p class="event-section__eyebrow">Team</p>
            <h1 class="event-section__title">Team Roster</h1>
            <p class="event-section__lead">Invite teammates so they can contribute to every event.</p>
          </div>
          <div class="event-section__actions">
            <%= link_to "Add Teammate", new_user_path, class: "event-section__cta" %>
          </div>
        </header>

        <div class="event-section__body">
          <% if @users.any? %>
            <table class="event-table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Title</th>
                  <th>Email</th>
                  <th>Phone</th>
                  <th>Role</th>
                  <th>Joined</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <% @users.each do |user| %>
                  <tr>
                    <td><%= user.name %></td>
                    <td><%= user.title.presence || "—" %></td>
                    <td><%= user.email %></td>
                    <td><%= user.phone_number.presence || "—" %></td>
                    <td><%= user.role.humanize %></td>
                    <td><%= user.created_at&.strftime('%b %-d, %Y') %></td>
                    <td class="event-table__actions">
                      <%= link_to "Edit", edit_user_path(user), class: "event-section__link" %>
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          <% else %>
            <div class="event-section__empty">No teammates yet. Be the first to invite someone.</div>
          <% end %>
        </div>
      </section>
    </div>
  </div>
<% end %>
