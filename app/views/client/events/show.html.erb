<% event_date_range_label = if @event.starts_on.present? && @event.ends_on.present?
                              if @event.starts_on == @event.ends_on
                                @event.starts_on.strftime("%B %-d, %Y")
                              else
                                "#{@event.starts_on.strftime('%B %-d, %Y')} – #{@event.ends_on.strftime('%B %-d, %Y')}"
                              end
                            elsif @event.starts_on.present?
                              @event.starts_on.strftime("%B %-d, %Y")
                            elsif @event.ends_on.present?
                              @event.ends_on.strftime("%B %-d, %Y")
                            else
                              "Dates TBD"
                            end %>

<section class="client-hero">
  <div class="client-hero__meta">
    <p class="client-hero__eyebrow"><%= @event.location.presence || "Location TBD" %></p>
    <h1 class="client-hero__title"><%= @event.name %></h1>
    <p class="client-hero__dates"><%= event_date_range_label %></p>
  </div>
</section>

<section class="client-dashboard">
  <h2 class="client-dashboard__heading">Explore Your Planning Tools</h2>
  <div class="client-dashboard__grid client-dashboard__grid--three">
    <% @module_cards.each do |card|
         link_label = card.fetch(:link_label, "Open") %>
      <article class="client-dashboard__card">
        <h3><%= card[:title] %></h3>
        <p><%= card[:description] %></p>
        <%= link_to link_label, card[:path], class: "client-dashboard__cta" %>
      </article>
    <% end %>
  </div>
</section>

<section class="client-quick-links">
  <h2 class="client-quick-links__heading">Useful Event Links</h2>
  <% if @quick_links.any? %>
    <ul class="client-quick-links__list" style="display: flex; gap: 1rem; flex-wrap: wrap; padding: 0; margin: 0; list-style: none;">
      <% @quick_links.each do |link| %>
        <li class="client-quick-links__item">
          <%= link_to link.label, link.url, target: "_blank", rel: "noopener", class: "client-quick-links__link" %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p class="client-quick-links__empty">Your planner hasn’t published any quick links yet.</p>
  <% end %>
</section>

<section class="client-team">
  <h2 class="client-team__heading">My Planning Team</h2>
  <% if @planning_team_members.any? %>
    <ul class="client-team__list">
      <% @planning_team_members.each do |team_member| %>
        <% user = team_member.user %>
        <li class="client-team__item">
          <h3 class="client-team__name"><%= user.name %></h3>
          <% if user.title.present? %>
            <p class="client-team__title"><%= user.title %></p>
          <% end %>
          <ul class="client-team__contact">
            <% if user.phone_number.present? %>
              <li><strong>Phone:</strong> <%= user.phone_number %></li>
            <% end %>
            <li><strong>Email:</strong> <%= mail_to user.email %></li>
          </ul>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p class="client-team__empty">Your planning team will appear here once your planner publishes their contact details.</p>
  <% end %>
</section>
