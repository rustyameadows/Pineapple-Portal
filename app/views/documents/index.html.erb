<% provide :page_shell do %>
  <div class="event-layout">
    <%= render "events/sidebar_navigation", event: @event %>

    <div class="event-layout__main">
      <%= render "shared/flash" %>

      <section class="event-section">
        <header class="event-section__header">
          <div>
            <p class="event-section__eyebrow">Documents</p>
            <h1 class="event-section__title">Files for <%= @event.name %></h1>
            <p class="event-section__lead">Browse by category to jump straight to packets, planner uploads, or client contributions.</p>
          </div>
          <div class="event-section__actions">
            <%= link_to "Manage generated documents", event_documents_generated_index_path(@event), class: "button button--ghost" %>
            <%= link_to "Upload document", new_event_document_path(@event), class: "event-section__cta" %>
          </div>
        </header>

        <div class="event-section__body">
          <%= render "documents/generated_panel",
                     event: @event,
                     generated_documents: @generated_documents %>

          <div class="event-docs__panel">
            <%= render "documents/summary_table", event: @event, groups: @document_groups %>
          </div>

          <div class="event-docs__panel">
            <h2 class="event-section__subheading">Latest documents</h2>
            <%= render "documents/table",
                      documents: @latest_documents,
                      title_link: ->(document) { event_document_path(@event, document) },
                      empty_message: "No documents uploaded yet." %>
          </div>
        </div>
      </section>
    </div>
  </div>
<% end %>
