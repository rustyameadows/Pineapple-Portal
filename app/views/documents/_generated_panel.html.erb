<div class="event-docs__panel">
  <h2 class="event-section__subheading">Generated packets</h2>
  <% if generated_documents.present? %>
    <table class="event-docs__summary">
      <thead>
        <tr>
          <th scope="col">Packet</th>
          <th scope="col">Latest status</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% generated_documents.each do |entry| %>
          <% definition = entry[:definition] %>
          <% latest = entry[:latest_version] %>
          <tr>
            <th scope="row">
              <%= link_to definition.title,
                          event_documents_generated_path(event, entry[:logical_id]),
                          class: "event-docs__summary-link" %>
              <% if definition.client_visible? %>
                <span class="generated-doc__badge">Client visible</span>
              <% end %>
            </th>
            <td>
              <% if latest.present? && latest.storage_uri.present? %>
                Version <%= latest.version %> Â· <%= latest.updated_at.to_fs(:short) %>
              <% else %>
                <span class="generated-doc__empty">Needs first compile</span>
              <% end %>
            </td>
            <td class="generated-doc__actions">
              <%= link_to "Open",
                          event_documents_generated_path(event, entry[:logical_id]),
                          class: "button button--tiny button--ghost" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p class="event-docs__generated-link">No packets yet. <%= link_to "Build one now", event_documents_generated_index_path(event) %>.</p>
  <% end %>
</div>
