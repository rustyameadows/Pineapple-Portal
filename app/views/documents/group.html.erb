<% provide :page_shell do %>
  <div class="event-layout">
    <%= render "events/sidebar_navigation", event: @event %>

    <div class="event-layout__main">
      <%= render "shared/flash" %>

      <section class="event-section">
        <header class="event-section__header event-section__header--document">
          <div>
            <p class="event-section__eyebrow">Documents</p>
            <h1 class="event-section__title"><%= @label %></h1>
            <p class="event-section__lead">Showing files uploaded as <%= @label.downcase %>. Use the tabs to switch categories.</p>
          </div>
          <%= link_to "Upload Document", new_event_document_path(@event), class: "event-section__cta" %>
        </header>

        <div class="event-section__body">
          <nav class="documents-nav" aria-label="Document categories">
            <%= link_to event_documents_path(@event), class: "documents-nav__link" do %>
              <span>All documents</span>
              <span class="documents-nav__count"><%= @event.documents.latest.count %></span>
            <% end %>
            <% @document_groups.each do |group| %>
              <% classes = ["documents-nav__link"] %>
              <% classes << "documents-nav__link--active" if group[:key].to_s == @source_key %>
              <%= link_to document_group_path(@event, group[:key]), class: classes.join(" ") do %>
                <span><%= document_source_label_text(group[:key]) %></span>
                <span class="documents-nav__count"><%= group[:latest_count] %></span>
              <% end %>
            <% end %>
          </nav>

          <%= render "documents/table", event: @event, documents: @documents,
                    columns: %i[title version updated_at visibility source uploader size actions],
                    empty_message: "No documents in this category yet.",
                    context: :planner %>
        </div>
      </section>
    </div>
  </div>
<% end %>
