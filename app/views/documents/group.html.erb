<% provide :page_shell do %>
  <div class="event-layout">
    <%= render "events/sidebar_navigation", event: @event %>

    <div class="event-layout__main">
      <%= render "shared/flash" %>

      <section class="event-section">
        <header class="event-section__header">
          <div>
            <p class="event-section__eyebrow">Documents</p>
            <h1 class="event-section__title"><%= @label %></h1>
            <p class="event-section__lead">Showing files uploaded as <%= @label.downcase %>. Use the summary to navigate to other categories.</p>
          </div>
          <%= link_to "Upload Document", new_event_document_path(@event), class: "event-section__cta" %>
        </header>

        <div class="event-section__body">
          <% if @documents.any? %>
            <ul class="event-docs__grid">
              <% @documents.each do |document| %>
                <li class="event-docs__card">
                  <header class="event-docs__card-header">
                    <h2 class="event-docs__title"><%= document.title %></h2>
                    <% unless document.is_latest? %>
                      <span class="event-docs__badge">v<%= document.version %></span>
                    <% end %>
                  </header>
                  <dl class="event-docs__meta">
                    <div>
                      <dt>Version</dt>
                      <dd>v<%= document.version %></dd>
                    </div>
                    <div>
                      <dt>Updated</dt>
                      <dd><%= l(document.updated_at, format: :long) %></dd>
                    </div>
                    <div>
                      <dt>Visibility</dt>
                      <dd><%= document.client_visible? ? "Shared with client" : "Planner only" %></dd>
                    </div>
                  </dl>
                  <div class="event-docs__actions">
                    <%= link_to "Open", event_document_path(@event, document), class: "event-docs__link" %>
                    <%= link_to "Download", download_event_document_path(@event, document), class: "event-docs__link" %>
                  </div>
                </li>
              <% end %>
            </ul>
          <% else %>
            <div class="event-section__empty">
              <p>No documents in this category yet.</p>
            </div>
          <% end %>
        </div>
      </section>
    </div>
  </div>
<% end %>
