<% provide :page_shell do %>
  <div class="event-layout">
    <%= render "events/sidebar_navigation", event: @event %>

    <div class="event-layout__main">
      <%= render "shared/flash" %>

      <section class="event-section">
        <header class="event-section__header">
          <div>
            <p class="event-section__eyebrow">Documents</p>
            <h1 class="event-section__title"><%= @label %></h1>
            <p class="event-section__lead">Showing files uploaded as <%= @label.downcase %>. Use the summary to navigate to other categories.</p>
          </div>
          <div class="event-section__actions">
            <%= link_to "Create generated document", event_documents_generated_index_path(@event), class: "button button--ghost" %>
            <%= link_to "Upload Document", new_event_document_path(@event), class: "event-section__cta" %>
          </div>
        </header>

        <div class="event-section__body">
          <div class="event-docs__panel">
            <%= render "documents/summary_table", event: @event, groups: @document_groups, active_key: @source_key %>
          </div>

          <% if @source_key == "packet" %>
            <%= render "documents/generated_panel",
                       event: @event,
                       generated_documents: @generated_documents %>
          <% end %>

          <%= render "documents/table",
                    documents: @documents,
                    title_link: ->(document) { event_document_path(@event, document) },
                    empty_message: "No documents in this category yet." %>
        </div>
      </section>
    </div>
  </div>
<% end %>
